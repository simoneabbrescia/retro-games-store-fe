<div class="login-shell">
  <mat-card class="login-card" appearance="outlined">
    <mat-card-header>
      <div mat-card-avatar class="login-avatar">
        <mat-icon>person</mat-icon>
      </div>
      <mat-card-title>Accedi</mat-card-title>
      <mat-card-subtitle>Entra nel tuo account RetroGames Store</mat-card-subtitle>
    </mat-card-header>

    <mat-divider></mat-divider>

    <mat-card-content>
      <!-- Messaggi top -->
      <div class="alert error" *ngIf="errorMsg">
        <mat-icon>error_outline</mat-icon>
        <span>{{ errorMsg }}</span>
      </div>
      <div class="alert success" *ngIf="successMsg">
        <mat-icon>check_circle</mat-icon>
        <span>{{ successMsg }}</span>
      </div>

      <form [formGroup]="accediForm" (ngSubmit)="onSubmit()" class="login-form">
        <!-- Email -->
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <mat-icon matPrefix>mail</mat-icon>
          <input matInput type="email" formControlName="email" autocomplete="email" placeholder="nome@example.com"
            required />
          <mat-error *ngIf="getErrorMessage('email')">
            {{ getErrorMessage('email') }}
          </mat-error>
        </mat-form-field>

        <!-- Password -->
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <mat-icon matPrefix>lock</mat-icon>
          <input matInput type="password" formControlName="password" autocomplete="current-password"
            placeholder="••••••••" required />
          <mat-error *ngIf="getErrorMessage('password')">
            {{ getErrorMessage('password') }}
          </mat-error>
          <mat-hint align="end">Min. 8 caratteri</mat-hint>
        </mat-form-field>

        <!-- Submit -->
        <button mat-flat-button color="primary" type="submit" class="btn-primary"
          [disabled]="accediForm.invalid || isSubmitting">
          {{ isSubmitting ? 'Caricamento...' : 'Accedi' }}
        </button>

        <button mat-stroked-button type="button" color="primary" [routerLink]="'/home'">
          Torna alla Home
        </button>

        <mat-progress-bar *ngIf="isSubmitting" mode="indeterminate" class="progress">
        </mat-progress-bar>
      </form>
    </mat-card-content>

    <mat-card-actions align="end" class="card-actions">
      <span class="hint">Non hai un account?</span>
      <a class="link" [routerLink]="'/registrati'">Registrati</a>
    </mat-card-actions>
  </mat-card>
</div>

<app-footer></app-footer>